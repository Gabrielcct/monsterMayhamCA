<%- include("../partials/head.ejs") -%>
<h1>Monster Mayhem</h1>
<br/>
<br/>
<h2>Game name : <%= gameName %></h2>
<h2> Welcome <%= playerName %></h2>

<div id="player-list">
    <ul>
        <% for (let playerName in games[gameName].players) { %>
            <% let player = games[gameName].players[playerName]; %>
            <li class="<%= player.status %>"><%= player.name %> status: <%= player.status %></li>
        <% } %>
    </ul>
</div>

<div>
    <!--<button id="placeMonster" class="btn btn-secondary" onclick="placeMonster()">Place Monster</button>-->
    <button id="endTurn" class="btn btn-danger" onclick="endTurn()">End Turn</button>
</div>

<div id="gameBoard">
    
    <% games[gameName].board.forEach((row, rowIndex) => { %>
        <!-- Each row -->
        <div class="board-row">
            <% row.forEach((cell, colIndex) => { %>
                <!-- Each collumn (cell in row) -->
                <div class="cell" data-row="<%= rowIndex %>" data-col="<%= colIndex %>">
                    <%= cell || '' %> 
                </div>
            <% }) %>
        </div>
    <% }) %>
</div>

<!-- to display monster info-->
<div id="monsters-container">
    <!-- To select monster type -->
    <div id="monster-placement" class="monster-placement"></div> 
    <!-- To select monster type -->
    <div id="monsters-info" class="monster-info"></div> 
    <!-- To select monster type -->
    <div id="monster-types" class="monster-types"></div> 
</div>
 
<div id="message-container"></div> 
<script src="/client.js"></script>
<!-- Call the updateMonstersDiv method with the provided monsters data -->
<% if (games[gameName] && games[gameName].players[playerName]) { %>
    <% const monsters = games[gameName].players[playerName].monsters; %>
    <% if (monsters) { %>
        <script>
            // Call the updateMonstersDiv method with the provided monsters data
            updateMonstersDiv(<%- JSON.stringify(monsters) %>);
        </script>
    <% } %>
<% } %>
<%- include("../partials/footer.ejs") -%>